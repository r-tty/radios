% The Radiant Operating System (RadiOS)
% Copyright (c) 2001 RET & COM Research.
% This file is a LaTeX document.

\section{RadiOS microkernel (rmk)}

\subsection{Таблицы страниц}

Процедуры для работы со страницами памяти находятся в файле \textit{pages.nasm}.
Рассмотрим назначение некоторых из них.
\\
\textit{PG\_Init} -- инициализация двоичной карты страниц. Информация о
свободных и использующихся (выделенных) страницах хранится ядром в виде
битовой карты (bit map). Если бит в карте сброшен, то соответствующая
страница считается занятой, если установлен -- то свободной. Такой подход
позволяет быстро и эффективно осуществлять поиск свободной страницы с
помощью операции BSF.
\\
\textit{PG\_StartPaging} -- создание таблиц страниц ядра и разрешение
страничного преобразования. На этом этапе в битовой карте отмечаются как
свободные страницы, не принадлежащие загруженным модулям и специальной
области верхней памяти HMA; затем строится каталог и таблицы страниц ядра.
В таблицы заносятся адреса, соответствующие физическим адресам страниц.
После этого регистр CR3 загружается адресом созданного каталога и
разрешается страничное преобразование.
\\
\textit{PG\_Alloc} -- резервирование (выделение) страницы памяти. Процедура
только осуществляет поиск свободной страницы в битовой карте и возвращает
адрес найденной страницы. В зависимости от переданного аргумента страница
резервируется либо в адресном пространстве ядра (первый мегабайт), либо
в "пользовательском" пространстве.
\\
\textit{PG\_Dealloc} -- освобождение страницы. Данная процедура только
устанавливает соответствующий бит в битовой карте, отмечая таким образом,
что страница доступна для резервирования.
\\
\textit{PG\_AllocDir}
\\
\textit{PG\_AllocAreaTables}
\\

\subsection{Pools}
